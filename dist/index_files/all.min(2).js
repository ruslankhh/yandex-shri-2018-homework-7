function onCommentClickTransition(t,e){t.preventDefault(),window.location=e+"#singleHcomments"}window.lhUtils={},lhUtils.getCoords=function(t){var e=t.getBoundingClientRect(),o=document.body,n=document.documentElement,i=window.pageYOffset||n.scrollTop||o.scrollTop,a=window.pageXOffset||n.scrollLeft||o.scrollLeft,r=n.clientTop||o.clientTop||0,s=n.clientLeft||o.clientLeft||0;return{top:e.top+i-r,left:e.left+a-s}},lhUtils.validateEmail=function(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)},lhUtils.isIOS=function(){for(var t=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];t.length;)if(-1<navigator.platform.indexOf(t.pop()))return!0;return!1},window.getCookie=function(t){var e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0},window.setCookie=function(t,e,o){var n=(o=o||{}).expires;if("number"==typeof n&&n){var i=new Date;i.setTime(i.getTime()+1e3*n),n=o.expires=i}n&&n.toUTCString&&(o.expires=n.toUTCString());var a=t+"="+(e=encodeURIComponent(e));for(var r in o){a+="; "+r;var s=o[r];!0!==s&&(a+="="+s)}document.cookie=a},window.deleteCookie=function(t){document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/"},function(r){function o(){var t=getCookie("accessToken");t&&(1==localStorage.getItem("isConnectSocialNetwork")?(n(t,function(t){var e=r(".auth__button--not-connect");e.removeClass("auth__button--not-connect js--auth-button js--connect-social-network"),-1!==e.attr("href").indexOf("facebook")?e.attr("href","https://facebook.com/"+t.fbId):e.attr("href","https://vk.com/id"+t.vkId)}),localStorage.setItem("isConnectSocialNetwork","0")):n(t,e))}function e(t){var e,o,n,i=new Event("lh_login");if(i.userData=t,window.dispatchEvent(i),"auth"==window.location.href.split("/")[3]){var a=(e="return_to",o=null,n=[],location.search.substr(1).split("&").forEach(function(t){(n=t.split("="))[0]===e&&(o=decodeURIComponent(n[1]))}),o||"/");window.location.replace(a)}r(".js--auth-avatar").attr("src",t.avatars.small),s(),r(".auth-popup--overlay").hide()}function s(){r(".js--login-button").toggle(),r(".js--account-button").toggle()}function n(t,e){r.post("/id/auth/get-user-data",{accessToken:t},function(t){e(t)})}localStorage.setItem("isConnectSocialNetwork","0"),localStorage.removeItem("lhAuthMessage"),r(function(){r(".auth-popup--overlay").click(function(){r(".auth-popup--overlay").hide()}),r(".auth-popup").click(function(t){t.stopPropagation()}),r(".js--toggle-auth-popup").click(function(t){t.stopPropagation(),r(".auth-popup--overlay").toggle()}),r(".js--auth-button").click(function(t){}),r(".js--connect-social-network").click(function(t){localStorage.setItem("isConnectSocialNetwork","1")}),r(".js--logout").click(function(){var t;t=new Event("lh_logout"),window.dispatchEvent(t),deleteCookie("accessToken"),r(".js--auth-avatar").attr("src",""),s(),window.location.replace("/")}),o(),window.addEventListener("storage",function(t){if("lhAuthMessage"==t.key){var e=JSON.parse(t.newValue);"isAccessTokenSet"===e.type&&o(),"isThisSocialNetworkAlreadyUsed"===e.type&&r(".profile-notify__overlay").show(),localStorage.removeItem("lhAuthMessage")}},!1)})}(jQuery),function(e){e(document).ready(function(){var t=e(".post-content");t.length<1||t.find('img[class*="wp-image-"].size-mobile').closest("p").css("text-align","center")})}(jQuery),jQuery(document).ready(function(t){t(".wpappbox.deprecated").removeClass("deprecated")}),function(e){e(void e(document).on("DOMSubtreeModified",".hc__menu__count",function(){var t=e('.hc__menu__count[el="comments_countCount"]').text();e(".js-comments-counter-for-single").text(t)}))}(jQuery),function(t){t(".secondary-menu").is(":visible")||t(".js-nav-test-pixel").remove()}(jQuery),function(a){var t=function(){var t=a("#desktop-fixed-bar"),e=a(window),o="desktop-fixed-bar_visible",n=500;function i(){e.scrollTop()>n?t.addClass(o):t.removeClass(o)}return{run:function(){this.showHide()},showHide:function(){i(),e.scroll(i)}}}();a(document).ready(function(){t.run()})}(jQuery),function(a){a(function(){!function(){var i=a(".post-content");if(i.length<1)return;768<=a(window).width()&&a(window).on("scroll",function(){var t=a(window).scrollTop(),e=lhUtils.getCoords(i[0]).top,o=e+i.outerHeight(),n=(t-e)/(o-e)*100;a("#fixed-menu__progress-bar").width(n+"%")});a(window).on("scroll",function(){var t=a(".fixed-menu"),e=window.pageYOffset||document.documentElement.scrollTop;0<e?(t.addClass("is--go-down"),t.removeClass("is--go-up")):(t.addClass("is--go-up"),t.removeClass("is--go-down")),e})}()})}(jQuery),function(i){var t,a=i("#instead-item"),e=a.closest(".stripe").attr("data-exclude");t=i('[data-item-exclude="'+e+'"]'),void 0!==e&&0<t.length&&t.each(function(){var t,e,o=i(this),n={id:a.attr("data-id"),title:a.attr("data-title"),link:a.attr("data-link"),description:a.attr("data-description"),img:a.attr("data-img"),edit:a.attr("data-edit"),test_pixel:a.attr("data-test-pixel"),comment:a.attr("data-comment"),category:a.html()};a.children().remove(),o.find(".stripe-item__title").html(n.title),o.find(".lead__description").html(n),o.find(".ab-link").attr("href",n.link),o.find(".stripe-item__img-block").html(n.img),o.find(".post-control").attr("href",n.edit),o.find(".meta-mark_cat").remove(),o.find(".stripe-item-meta").append(i(n.category)),o.find(".stripe-item-meta__views").children("div").removeClass().addClass("views-counter views-counter-"+n.id).attr("data-post-id",n.id),o.find(".stripe-item-meta__comments").remove(),0<n.comment&&o.find(".stripe-item-meta").prepend(i('<div class="stripe-item-meta__comments"><i class="icon-comment"></i> <span class="js-comments-counter" data-xid="lifehacker.ru/?p='+n.id+'">'+n.comment+"</span></div>")),i(this).find('[data-role="text-pixel"]').remove(),n.test_pixel&&(o.append(i('<img data-role="test-pixel" style="position: absolute; width: 1px; height: 1px; display: none" data-src="'+n.test_pixel+'" />')),t=i(this),e=t.find('[data-role="test-pixel"]'),t.offset().top<i(document).scrollTop()+i(window).height()&&e.attr("src",e.attr("data-src").replace("[RANDOM]",function(){return Math.floor(1+4294967295*Math.random())})))})}(jQuery),function(r){var s={mobile:310,medium:630,ringo_800:800,ringo_1600:1600};function t(){r(".lazy-load").each(function(){if(r(this).is(":visible")&&function(t){"function"==typeof jQuery&&t instanceof jQuery&&(t=t[0]);return t.getBoundingClientRect().top-300<=(window.innerHeight||document.documentElement.clientHeight)}(this)){var t=r(this);if(1!=t.css("opacity")){var e=t.data("src"),o=t.outerWidth();2<=window.devicePixelRatio&&(o*=2);var n=null;for(var i in s){var a=s[i];if(n=t.data("src-"+i),o<=a)break}n||(n=e),r("<img/>").attr("src",n).load(function(){r(this).remove(),t.css({"background-image":"url("+n+")",opacity:1}),t.parents(".stripe-item__img-block").css("background-image","")})}}})}r(t),r(window).on("scroll resize",t)}(jQuery),function(m){var t=function(){var t,i;if(m("body").hasClass("single-format-chat")&&(t=m(".lh-card"),i=t.length,t.each(function(t,e){var o="- "+(t+1)+"/"+i+" -";m(e).attr("id","lh-card-"+(t+1));var n='<div class="lh_card__counter">'+o+"</div>";m(e).prepend(n)}),!(m(window).width()<768))){var a,e=m(window),r=e.width(),o=m(".lh-cards"),n=m(".lh-cards .menu"),s=n.outerHeight(),c=lhUtils.getCoords(o[0]).top,l=c+o.outerHeight(),d=0,u=c-(d=1023<r?78:5),p=l-d-s;return e.load(function(){f()}),e.scroll(function(){f()}),e.resize(function(){f(),e.scrollTop(e.scrollTop()-1)}),{initiate:function(){m(window).scrollTop(m(window).scrollTop()-1)},scrollToCard:function(){var o,n;r<768||m(".single-format-chat .lh-cards").find('a[href^="#lh-card-"]').on("click",function(t){t.preventDefault(),o=(o=m(this).attr("href")).replace("#","");var e=document.getElementById(o);n=lhUtils.getCoords(e).top-d,m("html, body").animate({scrollTop:n},400)})},switchClassesOfmenu:function(){r<768||e.on("scroll",function(){if((a=e.scrollTop())<u){if(n.hasClass("menu--top"))return;n.attr("class","menu").addClass("menu--top")}else if(u<a&&a<p){if(n.hasClass("menu--fixed"))return;n.attr("class","menu").addClass("menu--fixed")}else if(p<a){if(n.hasClass("menu--bottom"))return;n.attr("class","menu").addClass("menu--bottom")}})},highlightCurrentItem:function(){r<768||e.on("scroll",function(){a=e.scrollTop(),m(".lh-card").each(function(){var t=m(this),e=lhUtils.getCoords(this).top-d-5,o=lhUtils.getCoords(this).top+t.outerHeight()-d+5,n='.lh-cards .menu a[href="#'+t.attr("id")+'"]';e<a&&a<o&&(m(".lh-cards .menu a").removeClass("active-menu-item"),m(n).addClass("active-menu-item"))})})}}}function f(){s=n.outerHeight(),c=lhUtils.getCoords(o[0]).top,l=c+o.outerHeight(),u=c-d,p=l-d-s}}();m(document).ready(function(){m.each(t,function(t,e){e()})})}(jQuery),jQuery(document).ready(function(l){var t=function(){var o=_selectionNode="",n="single__content";function i(){var t="";return window.getSelection?t=window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(t=document.selection.createRange().text),o=t,_selectionNode=function(){{if(document.selection)return document.selection.createRange().parentElement().textContent;var t=window.getSelection();if(0<t.rangeCount)return t.getRangeAt(0).startContainer.parentNode.textContent}}(),t}function a(){var t,e,o=l(".typo-popup__comment").val();return(o=(t=o,e=document.createElement("DIV"),e.innerHTML=t,e.textContent||e.innerText||"").substr(0,400))||""}function r(){var t=l(".typo-popup__text"),e="«"+i().substr(0,300)+"...»";t.html(e),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}function s(){var t,e=null;if(window.getSelection){if((t=window.getSelection()).rangeCount){var o=t.getRangeAt(0).commonAncestorContainer;1!=(e=1==o.nodeType?o:o.parentNode).nodeType&&(e=e.parentNode)}}else(t=document.selection)&&"Control"!=t.type&&(e=t.createRange().parentElement());return e}function c(){l(".typo-popup--overlay").hide()}return{closePopup:function(){l(".typo-popup__close").on("click",function(){c()}),l(document).on("keyup",function(t){27==t.keyCode&&c()})},showPopup:function(){var e="."+n;l(document).on("keydown",function(t){if(t.ctrlKey&&13===t.keyCode){if(!i())return;if(300<i().length)return void alert("Вы выбрали слишком длинный текст.");l(s()).parents(e).length,l(l(s()).parents(e).context).hasClass(n);l("body").hasClass("single")&&(r(),l(".typo-popup--overlay").show())}})},sendAjax:function(){l(".typo-popup__send").on("click",function(){var t,e=_selectionNode.replace(o,"<b>"+o+"</b>")+"\r\n\r\n<i>Комментарий: "+a()+"</i>\r\n\r\n"+(t=l("title").text()||"Ссылка",'<a href="'+location.href+'">'+t+"</a>");e=encodeURIComponent(e),l.ajax({type:"POST",url:options.ajaxUrl,data:{action:"sendtypo",text:e},success:function(t){console.log(t)},error:function(t){console.log(t)}}),l(".typo-popup__comment").val(""),c()})},stopPropagation:function(){l(".typo-popup").on("click",function(t){t.stopPropagation()})}}}();l.each(t,function(t,e){e()})}),function(o){function t(t){t.preventDefault();var e=o(this).data("href");window.location.replace(e)}function e(){o(".js--main-top-logo").toggle(),o(".js--alt-top-logo").toggle()}o(document).ready(function(){o(".js--logo-part-link").click(t),o(".js--logo-part-link").hover(e)})}(jQuery),function(c){c(".mailchimp-ajax-form form").off("submit").on("submit",function(t){t.preventDefault();var n=c(this),e=n.find("input[type=email]").first().val(),i=n.parents(".mailchimp-ajax-form"),o=i.data("label"),a=i.data("hide"),r=i.find(o).first(),s=r.text();lhUtils.validateEmail(e)?(r.text("Пожалуйста, подождите..."),c.ajax({type:n.attr("method"),url:n.attr("action"),data:n.serialize(),cache:!1,dataType:"jsonp",jsonp:"c",contentType:"application/json; charset=utf-8",success:function(t){if("success"!==t.result)r.text("Вы уже подписаны на нашу рассылку.");else{var e=n.data("position"),o="subscribe_"+e.toLowerCase();r.text("Благодарим за подписку, проверьте почту."),a&&setTimeout(function(){i.fadeOut(function(){r.text(s)})},2e3),dataLayer.push({event:"passEventToGa",eventCategory:"Форма подписки",eventAction:"Форма отправлена",eventLabel:e,eventValue:1}),console.log(o),yaCounter1915831.reachGoal(o)}},error:function(t){r.text("К сожалению, произошла ошибка, попробуйте позже.")}})):r.text("В введенном адресе email имеются ошибки.")})}(jQuery),function(r){r.fn.reverse=[].reverse;var e,t=(e={},{init:function(){var t;(t={}).$primaryMenuList=r("#primary-menu-list"),t.$secondaryMenuList=r("#secondary-menu-list"),t.$logo=r("#primary-menu-logo"),t.$win=r(window),t.windowWidth=t.$win.outerWidth(),e=t},run:function(){this.init(),this.removeExtraLi(e.$primaryMenuList,e.windowWidth-440),this.removeExtraLi(e.$secondaryMenuList,e.windowWidth-170)},removeExtraLi:function(t,e){var o=t.find("li"),n=0,i=0;if(o.show(),o.length<2)t.css("opacity",1);else if(o.each(function(){n+=r(this).outerWidth()}),n<e)t.css("opacity",1);else{var a=n-e;o.reverse().each(function(){if(i+=r(this).outerWidth(),r(this).hide(),a<=i)return!1}),t.css("opacity",1)}}});r(document).ready(function(){t.run(),r(window).resize(function(){t.run()})})}(jQuery),function(t){var e,o=(e={$control:t("#footer-push-control"),subscribeText:"Подписаться",unsubscribeText:"Отписаться"},{run:function(){this._init(),this._showControl(),this._changeSubscription(),this._onSubChange()},_init:function(){OneSignal.isPushNotificationsEnabled(function(t){t?e.$control.text(e.unsubscribeText):e.$control.text(e.subscribeText)})},_changeSubscription:function(){e.$control.click(function(t){t.preventDefault(),OneSignal.isPushNotificationsEnabled(function(t){OneSignal.push(["setSubscription",!t])})})},_showControl:function(){OneSignal.push(["getNotificationPermission",function(t){"granted"===t?e.$control.show():e.$control.hide()}])},_onSubChange:function(){OneSignal.on("subscriptionChange",function(t){t?e.$control.text(e.unsubscribeText):e.$control.text(e.subscribeText)})}});t(document).ready(function(){void 0!==window.OneSignal?window.OneSignal.push(function(){o.run()}):console.log("OneSignal is not defined")})}(jQuery),function(l){function e(){var t=l(this),e=t.data("postids").split(",");if(e){var o,n,i=e[Math.floor(Math.random()*e.length)],a=t.parent(".stripe-item");o=i,n=function(t,e){t.parent(".post_collection_widget").length?function(t,e){var o=u(e,"post-thumbnail");o&&d(t,o);e.title&&e.title.rendered&&t.find(".stripe-item__title").html(e.title.rendered);e.link&&t.find("a").attr("href",e.link)}(t,e):function(t,a){var e=t.width()<470?u(a,"post-thumbnail"):(o=a,o&&o._embedded&&o._embedded["wp:featuredmedia"]&&o._embedded["wp:featuredmedia"][0]&&o._embedded["wp:featuredmedia"][0].source_url?o._embedded["wp:featuredmedia"][0].source_url:null);var o;e&&d(t,e);a.title&&a.title.rendered&&t.find(".stripe-item__title").html(a.title.rendered);a.ringo_subtitle&&t.find(".lead__description").html(a.ringo_subtitle);a.link&&t.find("a").attr("href",a.link);var n=t.find(".post-controls");n.length&&n.attr("href","https://lifehacker.ru/wp-admin/post.php?post="+a.id+"&action=edit");var r=t.find(".stripe-item-meta");r.html("");var s=(i=a,parseInt(i.comments_number)?'<div class="stripe-item-meta__comments"><i class="icon-comment"></i><span data-xid="lifehacker.ru/?p='+i.id+'" class="js-comments-counter"> '+i.comments_number+"</span></div>":"");var i;s&&r.append(s);var c=function(t){var e="";if(t.post_label){var o=t.post_label.toLowerCase();if("партнерский"===o)return e+='<div class="meta-mark meta-mark_advert"><span>ПАРТНЁРСКИЙ</span></div>';"колонка"===o&&(e+='<div class="meta-mark meta-mark_guest"><span class="meta-info__tax__term meta-info--hoverable" onclick="event.preventDefault();window.location=\'\'">КОЛОНКА</span></div>')}var n=function(t){var e=t._embedded&&t._embedded["wp:term"];t._embedded["wp:term"]&&t._embedded["wp:term"];var o=[];for(var n in e){var i=e[n];if(i.length){var a=i[0];"category"===a.taxonomy&&(o=i)}}return o}(t);if(!n.length)return e;for(var i in n){var a=n[i];a&&(e+='<div class="meta-mark meta-mark_cat"><span class="meta-info__tax__term meta-info--hoverable"onclick="event.preventDefault();window.location='+a.link+'"> '+a.name.toUpperCase()+" </span></div>")}return e}(a);c&&r.append(c);l.post("/wp-content/plugins/lh-views/api.php",{action:"get-views",postIds:[a.id]},function(t){var e=JSON.parse(t);if("ok"==e.status){var o=parseInt(e.viewsCounts[a.id]);if(o){var n=String(o).replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 "),i='<div class="stripe-item-meta__views js--views-counter--block"><i class="icon-view"></i> '+n+'<div class="views-counter views-counter-'+a.id+'" data-post-id="'+a.id+'"></div></div>';s?r.find(".stripe-item-meta__comments").after(i):r.prepend(i)}}})}(t,e)}.bind(null,a),l.get("https://lifehacker.ru/?rest_route=/wp/v2/posts/"+o+"&_embed",n)}}function d(t,e){var o=t.find(".stripe-item__img-block");o.find(".stripe-item__img-background").remove(),o.append('<div class="stripe-item__img-background" style="opacity: 1; background-image: url('+e+')"></div>')}function u(t,e){return t&&t._embedded&&t._embedded["wp:featuredmedia"]&&t._embedded["wp:featuredmedia"][0]&&t._embedded["wp:featuredmedia"][0].media_details&&t._embedded["wp:featuredmedia"][0].media_details.sizes&&t._embedded["wp:featuredmedia"][0].media_details.sizes[e]&&t._embedded["wp:featuredmedia"][0].media_details.sizes[e].source_url?t._embedded["wp:featuredmedia"][0].media_details.sizes[e].source_url:null}l(function(){var t=l(".post-collection-widget__hidden-data");t.length&&t.each(e)})}(jQuery),function(t){var e=t("html, body"),o=t("body"),n=o.find(".hc__root").first();n.show(),o.hasClass("single")&&(-1!==window.location.hash.indexOf("hcm")&&n.show(),t(".scroll-to-comments").click(function(){if(void 0!==(n=o.find(".hc__root").first())[0]){var t=lhUtils.getCoords(n[0]).top-50;e.animate({scrollTop:t},600)}}))}(jQuery),jQuery,function(t){var e=t("#mobile-menu"),o=t("#show-mobile-menu"),n=t("#hide-mobile-menu");o.click(function(t){e.fadeIn("fast")}),n.click(function(t){e.fadeOut("fast")})}(jQuery),function(e){var t=e(".show-top-mc-form"),o=e(".top-banner"),n=e("#top-mc-form"),i=e(".lh-popup-form");function a(){n.fadeOut("fast"),e("body").find("#opac-bg").hide()}e("body").append('<div class="opac-bg" id="opac-bg"></div>'),t.click(function(){var t;n.is(":visible")?a():(t=lhUtils.getCoords(o[0]).top+o.outerHeight()+54,n.css("top",t+"px"),i.hide(),n.fadeIn("fast"),e("body").find("#opac-bg").show())}),e("body").on("click","#opac-bg",a),e("html, body").on("click",a),n.click(function(t){t.stopPropagation()})}(jQuery),function(m){m("body").hasClass("single")&&function(){var o=m(window),i=m(".side-banner"),n=i.find(".widget_can_fix"),r=n.toArray().map(function(t){return m(t)}),s=i.find(".widget").toArray().map(function(t){return m(t)}),c=m("#content-bottom"),e=m(".single-sidebar"),l=(e.parent(),5);m("body").hasClass("single")&&(l=48);var d="static",u="fixed",p="absolute",f=d;return{run:function(){if(!(e.length<1)){var t=this;m(document).ready(function(){t.onScroll()})}},onScroll:function(){o.scroll(function(){var a=lhUtils.getCoords(c[0]).top-l,t=function(t){t||(t=0);var e=s[s.length-1],o=lhUtils.getCoords(i[0]).top+i.outerHeight();if(f===d&&e.hasClass("widget_can_fix"))for(var n=s.length-1;0<=n;--n)if(!1===s[n].hasClass("widget_can_fix")){o=lhUtils.getCoords(s[n+1][0]).top;break}return o-t}(l),e=o.scrollTop();m.each(r,function(t,e){var o,n=0,i=0;for(o=t-1;0<=o;o--)n+=r[o].outerHeight(!0);for(o=t+1;o<r.length;o++)i+=r[o].outerHeight(!0);e.data({top:n+l,bottom:i}),a-=e.outerHeight(!0)}),e<=t?(n.css({position:"static",top:"auto",bottom:"auto"}),f=d):t<e&&e<a?(m.each(r,function(t,e){e.css({position:"fixed",top:e.data("top"),bottom:"auto"})}),f=u):(m.each(r,function(t,e){e.css({position:"absolute",top:"auto",bottom:e.data("bottom")})}),f=p)})}}}().run()}(jQuery),function(t){t("#single-post-header-pattern-image").on("load",function(){t("#single-post-header-pattern").addClass("img-is-loaded")}).each(function(){this.complete&&t(this).load()})}(jQuery),function(e){function t(){e('[data-role="test-pixel"]').each(function(){var t=e(this);t.closest('[data-role="post-item"]').offset().top<e(document).scrollTop()+e(window).height()&&void 0===t.attr("src")&&t.attr("src",t.attr("data-src").replace("[RANDOM]",function(){return Math.floor(1+4294967295*Math.random())}))})}t(),e(window).on("scroll",function(){t()})}(jQuery),jQuery(document).ready(function(t){t(window).load(function(){t(".top-banner").show()})}),function(n){if(0!=n("body").hasClass("single-format-standard")&&!(n(window).width()<1025)){var t=n("#up-button"),i=n("#up-arrow"),a=n("#single-content-and-sidebar"),r=n("#content-bottom"),s=n(window),c=lhUtils.getCoords(r[0]).top-50;lhUtils.getCoords(a[0]).top;s.scroll(e),e(),t.click(function(){n("html, body").animate({scrollTop:0},400,function(){i.fadeOut("fast")})})}function e(){c=lhUtils.getCoords(r[0]).top-50,lhUtils.getCoords(a[0]).top;var t=n("#single-post-header"),e=lhUtils.getCoords(t[0]).top+t.outerHeight(),o=s.scrollTop();e<o&&o<c?i.fadeIn("fast"):i.fadeOut("fast")}}(jQuery),function(o){o(document).ready(function(){var t=o(".post-content"),e=o("<div/>",{class:"lh-video"});t.length<1||t.find('iframe[src*="youtube"], iframe[src*="vimeo"], iframe[src*="coub"], iframe[src*="kickstarter"]').wrap(e)})}(jQuery),function(i){var t={run:function(){this.showPopup(),this.stopPropagation(),this.hidePopup(),this.addRefOpener()},showPopup:function(t){var n=this;i("body").on("click",".ref--opener",function(t){t.stopPropagation();var e=i(t.target).next(".ref"),o=e.find(".ref__popup");n._changePopupLocation(e,o),o.hasClass("ref__popup--hidden")&&(i(".ref__popup").addClass("ref__popup--hidden"),o.removeClass("ref__popup--hidden"))})},stopPropagation:function(){i(".ref__popup, .ref__order").on("click",function(t){t.stopPropagation()})},hidePopup:function(){i("body, .ref__popup_close").on("click",function(t){i(".ref__popup").addClass("ref__popup--hidden")})},_changePopupLocation:function(t,e){t.position().left<320?e.removeClass("ref__popup--left").addClass("ref__popup--right"):e.addClass("ref__popup--left").removeClass("ref__popup--right")},addRefOpener:function(){i(".ref").parent().each(function(){var t=i(this),e=t.html();t.html(e.replace(/\s*([^\s]+)\s*(<span\s+class=["|']ref["|'])/gi,' <span class="ref--opener">$1</span>$2'))})}};i(document).ready(function(){t.run()})}(jQuery);